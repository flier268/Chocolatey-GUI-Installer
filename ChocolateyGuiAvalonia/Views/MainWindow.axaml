<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ChocolateyGuiAvalonia.ViewModels"
        x:Class="ChocolateyGuiAvalonia.Views.MainWindow"
		x:DataType="vm:MainWindowViewModel"
        Title="Chocolatey GUI Installer" Width="900" Height="600">
    <Grid>
        <DockPanel>
            <!-- 分類選單 固定顯示 -->
			<Border DockPanel.Dock="Left" Width="180">
				<Grid RowDefinitions="Auto,*">
					<TextBlock Text="套件分類" FontWeight="Bold" Margin="10"/>
					<ScrollViewer Grid.Row="1" >
						<ListBox Name="CategoryListBox" Margin="10"
                                 ItemsSource="{Binding Categories}"
                                 SelectedIndex="0"
                                 SelectionChanged="CategoryListBox_SelectionChanged"/>
					</ScrollViewer>
				</Grid>
			</Border>
            <!-- 主內容 -->
            <Grid DockPanel.Dock="Right">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <!-- 套件列表 -->
                <DataGrid Name="PackageDataGrid" Grid.Row="1" AutoGenerateColumns="False" Margin="10"
                          ItemsSource="{Binding FilteredPackages}">
                    <DataGrid.Columns>
                        <DataGridCheckBoxColumn Header="選取" Binding="{Binding Selected}" Width="60"/>
						<DataGridTextColumn Header="狀態" Binding="{Binding Status}" Width="80"/>
                        <DataGridTextColumn Header="名稱" Binding="{Binding DisplayName}" Width="150"/>
                        <DataGridTextColumn Header="說明" Binding="{Binding Description}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
                <!-- 操作按鈕 -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
                    <Button Name="InstallButton" Content="安裝選定套件" Width="120" Margin="5" Click="InstallButton_Click"/>
                    <Button Name="RemoveButton" Content="移除選定套件" Width="120" Margin="5" Click="RemoveButton_Click"/>
                    <Button Name="RefreshStatusButton" Content="手動更新狀態" Width="120" Margin="5" Click="RefreshStatusButton_Click"/>
                </StackPanel>
                <!-- 進度條與日誌 -->
                <StackPanel Grid.Row="3" Margin="10">
                    <ProgressBar Name="InstallProgressBar" Height="20" Minimum="0" Maximum="100"/>
                    <TextBox Name="LogTextBox" Height="80" Margin="0,10,0,0" IsReadOnly="True" AcceptsReturn="True" TextWrapping="Wrap"/>
                </StackPanel>
                <!-- 備份還原按鈕 -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
                    <Button Name="BackupButton" Content="備份" Width="80" Margin="5" Click="BackupButton_Click"/>
                    <Button Name="RestoreButton" Content="還原" Width="80" Margin="5" Click="RestoreButton_Click"/>
                </StackPanel>
            </Grid>
        </DockPanel>
    </Grid>
</Window>
